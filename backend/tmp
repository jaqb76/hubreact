ldapClient.search(process.env.LDAP_BASE_DN, searchOptions, (searchErr, searchRes) => {
  if (searchErr) {
    console.error('Search error:', searchErr);
    reject(searchErr);
    return;
  }
  
  console.log('Search initiated'); // dodane logowanie
  
  searchRes.on('searchEntry', (entry) => {
    console.log('Search entry received:', entry); // peÅ‚ny obiekt entry
    console.log('Entry object:', entry.object); // obiekt z atrybutami
    console.log('Entry raw:', entry.raw); // surowe dane
    // reszta kodu...
  });

  searchRes.on('error', (err) => {
    console.error('LDAP search error:', err);
    reject(err);
  });

  searchRes.on('end', (result) => {
    console.log('Search ended, result:', result);
    if (!foundUser) {
      console.log('No user found with filter:', searchOptions.filter);
      reject(new Error(`User not found with sAMAccountName=${username}`));
    }
  });
});
